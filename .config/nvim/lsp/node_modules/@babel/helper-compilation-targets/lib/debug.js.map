{"version":3,"names":["semver","prettifyVersion","semverify","isUnreleasedVersion","getLowestImplementedVersion","getInclusionReasons","item","targetVersions","list","minVersions","Object","keys","reduce","result","env","minVersion","targetVersion","minIsUnreleased","targetIsUnreleased","lt","toString"],"sources":["../src/debug.ts"],"sourcesContent":["import semver from \"semver\";\nimport { prettifyVersion } from \"./pretty\";\nimport {\n  semverify,\n  isUnreleasedVersion,\n  getLowestImplementedVersion,\n} from \"./utils\";\nimport type { Target, Targets } from \"./types\";\n\nexport function getInclusionReasons(\n  item: string,\n  targetVersions: Targets,\n  list: { [key: string]: Targets },\n) {\n  const minVersions = list[item] || {};\n\n  return (Object.keys(targetVersions) as Target[]).reduce((result, env) => {\n    const minVersion = getLowestImplementedVersion(minVersions, env);\n    const targetVersion = targetVersions[env];\n\n    if (!minVersion) {\n      result[env] = prettifyVersion(targetVersion);\n    } else {\n      const minIsUnreleased = isUnreleasedVersion(minVersion, env);\n      const targetIsUnreleased = isUnreleasedVersion(targetVersion, env);\n\n      if (\n        !targetIsUnreleased &&\n        (minIsUnreleased ||\n          semver.lt(targetVersion.toString(), semverify(minVersion)))\n      ) {\n        result[env] = prettifyVersion(targetVersion);\n      }\n    }\n\n    return result;\n  }, {} as Partial<Record<Target, string>>);\n}\n"],"mappings":"AAAA,OAAOA,MAAM,MAAM,QAAQ;AAC3B,SAASC,eAAe,QAAQ,aAAU;AAC1C,SACEC,SAAS,EACTC,mBAAmB,EACnBC,2BAA2B,QACtB,YAAS;AAGhB,OAAO,SAASC,mBAAmBA,CACjCC,IAAY,EACZC,cAAuB,EACvBC,IAAgC,EAChC;EACA,MAAMC,WAAW,GAAGD,IAAI,CAACF,IAAI,CAAC,IAAI,CAAC,CAAC;EAEpC,OAAQI,MAAM,CAACC,IAAI,CAACJ,cAAc,CAAC,CAAcK,MAAM,CAAC,CAACC,MAAM,EAAEC,GAAG,KAAK;IACvE,MAAMC,UAAU,GAAGX,2BAA2B,CAACK,WAAW,EAAEK,GAAG,CAAC;IAChE,MAAME,aAAa,GAAGT,cAAc,CAACO,GAAG,CAAC;IAEzC,IAAI,CAACC,UAAU,EAAE;MACfF,MAAM,CAACC,GAAG,CAAC,GAAGb,eAAe,CAACe,aAAa,CAAC;IAC9C,CAAC,MAAM;MACL,MAAMC,eAAe,GAAGd,mBAAmB,CAACY,UAAU,EAAED,GAAG,CAAC;MAC5D,MAAMI,kBAAkB,GAAGf,mBAAmB,CAACa,aAAa,EAAEF,GAAG,CAAC;MAElE,IACE,CAACI,kBAAkB,KAClBD,eAAe,IACdjB,MAAM,CAACmB,EAAE,CAACH,aAAa,CAACI,QAAQ,EAAE,EAAElB,SAAS,CAACa,UAAU,CAAC,CAAC,CAAC,EAC7D;QACAF,MAAM,CAACC,GAAG,CAAC,GAAGb,eAAe,CAACe,aAAa,CAAC;MAC9C;IACF;IAEA,OAAOH,MAAM;EACf,CAAC,EAAE,CAAC,CAAC,CAAoC;AAC3C"}